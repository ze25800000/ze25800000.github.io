<!doctype html>
<html lang="en">
    <head>
		
        <meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="description" content="">
        <link rel="shortcut icon" href="http://p0mvyl5ro.bkt.clouddn.com/timg%20%281%29.gif"/>
        <link rel="canonical" href="http://guolinn.com/">
        <link rel="alternate" type="application/rss+xml" title="Zia Yang" href="">
        <title>ECMAScript6学习总结 | 超频散热</title>
        <meta name="description" content="{{meta_description}}">

        <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="/styles/crisp.css">
        <meta name="HandheldFriendly" content="True" />
        <meta name="MobileOptimized" content="320" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

    </head>
    
		<body class="post-template">
	

        <header id="header">
            <a id="logo" href="/"><img src="http://p0mvyl5ro.bkt.clouddn.com/timg%20%281%29.gif" alt="超频散热" /></a>
            <h1><a href="/">Zia Yang</a></h1>
            <p>学习笔记</p>
            <div id="follow-icons">
          <a href="http://github.com/ze25800000"><i class="fa fa-github-square fa-2x"></i></a>
          <a href="http://twitter.com/YzzzzzzE"><i class="fa fa-twitter-square fa-2x"></i></a>
      </div>
<h6><a href="/about">About</a></h6>
        </header>

        <main id="content">
        

<article class="post">
  一月 9, 2017
  
    <span class="taglist">  &middot; 
    
    
      <a href='/tags/javascript/'>javascript</a> 
    
    </span>
  

  <h1 class="post-title">ECMAScript6学习总结</h1>
  <section class="post-content article-entry">
    <h1 id="let和const"><a href="#let和const" class="headerlink" title="let和const"></a>let和const</h1><h4 id="let"><a href="#let" class="headerlink" title="let:"></a>let:</h4><ol>
<li>不允许重复声明</li>
<li>没有预解析,没有变量申明提升</li>
<li><p>let可以在<code>{}</code>内声明块级作用域,变量或者函数只在该区域才生效</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">//该区域为暂存死区</span><br><span class="line"></span><br><span class="line">    let a = 1;</span><br><span class="line">&#125;</span><br><span class="line">console.log(a);//Uncaught ReferenceError: a is not defined</span><br></pre></td></tr></table></figure>
<p> 块级作用域相当于闭包形成的局部作用域</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">for (var i = 0; i &lt; 5; i++) &#123;</span><br><span class="line">    (function (i) &#123;</span><br><span class="line">        setTimeout(function (i) &#123;</span><br><span class="line">            console.log(i);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;)(i);</span><br><span class="line">&#125;</span><br><span class="line">for (let i = 0; i &lt; 5; i++) &#123;</span><br><span class="line">    setTimeout(function (i) &#123;</span><br><span class="line">        console.log(i);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h5 id="实现选项卡功能的三种方式"><a href="#实现选项卡功能的三种方式" class="headerlink" title="实现选项卡功能的三种方式"></a>实现选项卡功能的三种方式</h5><ol>
<li><p>btns[i].index = i;</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">var btns = document.querySelectorAll(&apos;input&apos;);</span><br><span class="line">var divs = document.querySelectorAll(&apos;div&apos;);</span><br><span class="line"></span><br><span class="line">for (var i = 0; i &lt; divs.length; i++) &#123;</span><br><span class="line">    btns[i].index = i;</span><br><span class="line">    btns[i].onclick = function () &#123;</span><br><span class="line">        for (var j = 0; j &lt; divs.length; j++) &#123;</span><br><span class="line">            btns[j].className = &apos;&apos;;</span><br><span class="line">            divs[j].className = &apos;&apos;;</span><br><span class="line">        &#125;</span><br><span class="line">        divs[this.index].className = &apos;show&apos;;</span><br><span class="line">        this.className = &apos;active&apos;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用闭包</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">for (var i = 0; i &lt; divs.length; i++) &#123;</span><br><span class="line">    (function (i) &#123;</span><br><span class="line">        btns[i].onclick = function () &#123;</span><br><span class="line">            for (var j = 0; j &lt; divs.length; j++) &#123;</span><br><span class="line">                btns[j].className = &apos;&apos;;</span><br><span class="line">                divs[j].className = &apos;&apos;;</span><br><span class="line">            &#125;</span><br><span class="line">            divs[i].className = &apos;show&apos;;</span><br><span class="line">            this.className = &apos;active&apos;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用let</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">for (let i = 0; i &lt; divs.length; i++) &#123;</span><br><span class="line">    btns[i].onclick = function () &#123;</span><br><span class="line">        for (var j = 0; j &lt; divs.length; j++) &#123;</span><br><span class="line">            btns[j].className = &apos;&apos;;</span><br><span class="line">            divs[j].className = &apos;&apos;;</span><br><span class="line">        &#125;</span><br><span class="line">        divs[i].className = &apos;show&apos;;</span><br><span class="line">        this.className = &apos;active&apos;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="const"><a href="#const" class="headerlink" title="const"></a>const</h4><ul>
<li><p>使用<code>const</code>定义<code>常量</code>,常量在定义之后不可以修改,必须给初始值</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const a = 1;</span><br><span class="line">a = 2;</span><br><span class="line">console.log(a);//Uncaught TypeError: Assignment to constant variable</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果常量的属性是一个对象,那么对象的属性是可以修改的</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const a = &#123;</span><br><span class="line">    name:&apos;hello&apos;</span><br><span class="line">&#125;;</span><br><span class="line">a.name = &apos;world&apos;;</span><br><span class="line">console.log(a.name);//world</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="变量的解构赋值"><a href="#变量的解构赋值" class="headerlink" title="变量的解构赋值"></a>变量的解构赋值</h1><h4 id="解构赋值：ES6允许按照一定模式，从数组和对象中提取值，对变量进行赋值，这被称为解构（Destructuring）。"><a href="#解构赋值：ES6允许按照一定模式，从数组和对象中提取值，对变量进行赋值，这被称为解构（Destructuring）。" class="headerlink" title="解构赋值：ES6允许按照一定模式，从数组和对象中提取值，对变量进行赋值，这被称为解构（Destructuring）。"></a>解构赋值：ES6允许按照一定模式，从数组和对象中提取值，对变量进行赋值，这被称为解构（Destructuring）。</h4><ul>
<li><p>数组的解构赋值：按照对应的顺序解构。</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var [a, [b, c]] = [1, [2, 3]];</span><br></pre></td></tr></table></figure>
</li>
<li><p>对象的解构赋值: 按照名字一一对应</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var obj = &#123;</span><br><span class="line">    foo: function () &#123;&#125;,</span><br><span class="line">    o: &#123;&#125;,</span><br><span class="line">    arr: [],</span><br><span class="line">    str: &apos;abc&apos;</span><br><span class="line">&#125;;</span><br><span class="line">var &#123;foo, arr, str&#125; = obj;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="字符串扩展"><a href="#字符串扩展" class="headerlink" title="字符串扩展"></a>字符串扩展</h1><ul>
<li><code>str.repeat(10)</code>把str复制10次</li>
<li><p>模板字符串</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var name =&apos;leo&apos;,age = 39;</span><br><span class="line">var str = `你的名字是：$&#123;name&#125;你的年龄是：$&#123;age&#125;`;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>str.includes(要查找的字符串, 起始位置 )</code>返回布尔值,表示是否找到了参数字符串</p>
</li>
<li><code>str.startWith(要查找的字符串, 起始位置)</code>,表示参数字符串是否在源字符串的头部</li>
<li><code>str.endWith(要查找的字符串, 起始位置)</code>,表示参数字符串是否在源字符串的尾部</li>
</ul>
<h1 id="数值扩展"><a href="#数值扩展" class="headerlink" title="数值扩展"></a>数值扩展</h1><ul>
<li><code>Math.trunc(num)</code>,表示去掉小数点</li>
<li><code>Math.sign(-0)</code>,判断参数是正数、负数、正0还是负0</li>
<li><code>Math.hypot(3,4)</code>,返回所有参数的平方和的平方根(勾股定理)</li>
</ul>
<h1 id="数组扩展"><a href="#数组扩展" class="headerlink" title="数组扩展"></a>数组扩展</h1><ul>
<li><code>Array.from(字符串|类数组)</code>,把字符串或者类数组转成真正的数组.</li>
<li><code>Array.of(1,2,3,4,5);</code>,把参数转为数组.解决new Array(5)只有一个参数时,参数其参数为length的问题.</li>
<li><p><code>arr.find(function(value,index,arr){})</code>,它的参数是一个回调函数，所有数组成员依次执行该回调函数，直到找出第一个返回值为true的成员，然后返回该成员。如果没有符合条件的成员，则返回undefined。</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[1, 2, 3, 4, 5].arr.find((value, index) =&gt; value &gt; 3);//4</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>arr.findIndex(function(){})</code>,数组实例的findIndex方法的用法与find方法非常类似，返回第一个符合条件的数组成员的位置，如果所有成员都不符合条件，则返回-1。</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[1, 5, 10, 15].findIndex(function(value, index, arr) &#123;</span><br><span class="line">  return value &gt; 9;</span><br><span class="line">&#125;) // 2</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>arr.fill(填充内容,开始位置,结束为止)</code>,替换选中的内容</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[1, 2, 3, 4, 5].fill(6,2,4);// [1, 2, 6, 6, 5]</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>for...of</code>,用于遍历键值, 而<code>for...in</code>用于遍历键名,一个数据结构只要部署了Symbol.iterator属性，就被视为具有iterator接口，就可以用for…of循环遍历它的成员。</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var arr = [1, 2, 3, 4, 5];</span><br><span class="line">var str = &apos;hello&apos;;</span><br><span class="line">var obj = &#123;a: 1, b: 2, c: 3&#125;;</span><br><span class="line">for (var value of arr)console.log(value);//1,2,3,4,5</span><br><span class="line">for (var value of str)console.log(value);//h,e,l,l,o</span><br><span class="line">for (var value of obj)console.log(value);//Uncaught TypeError: obj[Symbol.iterator] is not a function</span><br></pre></td></tr></table></figure>
<ul>
<li><p><code>arr.keys()</code>,用于对数组键名的遍历</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var arr = [1, 2, 3, 4, 5];</span><br><span class="line">for(let index of arr.keys())&#123;</span><br><span class="line">    console.log(index);//0,1,2,3,4</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>arr.values()</code>,用于对数组键值的遍历(默认)</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var arr = [1, 2, 3, 4, 5];</span><br><span class="line">for(let value of arr.values())&#123;</span><br><span class="line">    console.log(index);//1,2,3,4,5</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>arr.entries()</code>,用于对数组键值对的遍历</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var arr = [1, 2, 3, 4, 5];</span><br><span class="line">for (var [key,value] of arr.entries()) &#123;</span><br><span class="line">    console.log(key, value);</span><br><span class="line">    /*</span><br><span class="line">    * 0 1</span><br><span class="line">    * 1 2</span><br><span class="line">    * 2 3</span><br><span class="line">    * 3 4</span><br><span class="line">    * 4 5</span><br><span class="line">    * */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>数组推导: 通过现有数组生成新数组</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var arr = [1, 2, 3, 4, 5];</span><br><span class="line">var arr1 = [for(value of arr) value * 2 ];</span><br><span class="line">console.log(arr1);// [2, 4, 6, 8, 10]</span><br><span class="line">var arr2 = [for(value of arr)if(value &gt; 3) value * 2 ];</span><br><span class="line">console.log(arr2);// [8, 10]</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="对象的扩展"><a href="#对象的扩展" class="headerlink" title="对象的扩展"></a>对象的扩展</h1><ul>
<li><p>属性的简洁表示法</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function fn(x, y) &#123;</span><br><span class="line">    x++;</span><br><span class="line">    y++;</span><br><span class="line">    /*return &#123;</span><br><span class="line">        x: x,</span><br><span class="line">        y: y</span><br><span class="line">    &#125;*/</span><br><span class="line">    return &#123;</span><br><span class="line">        x,</span><br><span class="line">        y</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">console.log(fn(1, 2));//Object &#123;x: 2, y: 3&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>对象内方法的简洁表示</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var obj = &#123;</span><br><span class="line">   name:&apos;momo&apos;,</span><br><span class="line">    /*showName:function()&#123;</span><br><span class="line">       return this.name;</span><br><span class="line">    &#125;*/</span><br><span class="line">   showName()&#123;</span><br><span class="line">       return this.name;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;;</span><br><span class="line">console.log(obj.showName());</span><br></pre></td></tr></table></figure>
</li>
<li><p>属性名表达式: 用表达式作为对象的属性名, 把表达式放在方括号内.</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var person = &#123;</span><br><span class="line">    name:&apos;momo&apos;,</span><br><span class="line">    [sex]:false,</span><br><span class="line">    [&apos;get&apos;+&apos;name&apos;]()&#123;</span><br><span class="line">        return this.name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">console.log(person.getname());</span><br><span class="line">console.log(person[sex])</span><br></pre></td></tr></table></figure>
</li>
<li><p>Object.is(a,b),用来判断两个值是否相等</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">0===-0;//true</span><br><span class="line">Object.is(0, -0);//false</span><br><span class="line">NaN===NaN;//false</span><br><span class="line">Object.is(NaN,NaN);//true</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Object.assign(target,source1,source2,...)</code>,将source对象的可枚举属性赋值到target对象上。<strong>注意</strong>：如果目标对象与源对象有同名属性，或多个源对象有同名属性，则后面的属性会覆盖前面的属性。</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var obj1 = &#123;&#125;;</span><br><span class="line">var obj2 = &#123;</span><br><span class="line">    name: &apos;zMouse&apos;</span><br><span class="line">&#125;;</span><br><span class="line">var obj3 = &#123;</span><br><span class="line">    name: &apos;duoduo&apos;,</span><br><span class="line">    age: 34</span><br><span class="line">&#125;;</span><br><span class="line">Object.assign(obj1, obj2, obj3);</span><br><span class="line">console.log(obj1);</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Object.getPrototypeOf(object)</code>,用来获取一个对象的prototype对象</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var Cat = function(name)&#123;</span><br><span class="line">    this.name = name;</span><br><span class="line">&#125;;</span><br><span class="line">Cat.prototype.showname = function()&#123;</span><br><span class="line">    return this.name;</span><br><span class="line">&#125;;</span><br><span class="line">var c1 = new Cat(&apos;momo&apos;);</span><br><span class="line">Object.getPrototypeOf(c1);</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Object.setPrototypeOf(object,prototype)</code>,用来设置一个对象的prototype对象</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">var Cat = function(name)&#123;</span><br><span class="line">    this.name = name;</span><br><span class="line">&#125;;</span><br><span class="line">Cat.prototype.showname = function()&#123;</span><br><span class="line">    return this.name;</span><br><span class="line">&#125;;</span><br><span class="line">var Person = function()&#123;</span><br><span class="line">&#125;;</span><br><span class="line">Person.prototype.dadoudou = function()&#123;</span><br><span class="line">&#125;;</span><br><span class="line">var c1 = new Cat(&apos;momo&apos;);</span><br><span class="line">Object.setPrototypeOf(c1, Person.prototype);</span><br><span class="line">console.log(Object.getPrototypeOf(c1))</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>proxy</code>,提供了一种机制，可以对外界的访问进行过滤和改写</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">var obj = &#123;</span><br><span class="line">    a: 1,</span><br><span class="line">    b: 2</span><br><span class="line">&#125;;</span><br><span class="line">var p1 = new Proxy(obj, &#123;</span><br><span class="line">    get(obj, attr)&#123; //当属性访问时触发</span><br><span class="line">        return obj[attr];</span><br><span class="line">    &#125;,</span><br><span class="line">    set(obj, attr, value)&#123; // 当属性修改时触发</span><br><span class="line">        if (value &lt; 10) &#123;</span><br><span class="line">            obj[attr] = value;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">p1.a = 5;</span><br><span class="line">console.log(p1.a); // 5</span><br><span class="line">console.log(obj.a); // 5</span><br><span class="line">p1.b = 11;</span><br><span class="line">console.log(p1.b); // 2</span><br><span class="line">console.log(obj.b); // 2</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="函数扩展"><a href="#函数扩展" class="headerlink" title="函数扩展"></a>函数扩展</h1><h4 id="函数参数的默认值-定义默认值的参数必须是尾参数，因为定义默认值之后该参数可忽略"><a href="#函数参数的默认值-定义默认值的参数必须是尾参数，因为定义默认值之后该参数可忽略" class="headerlink" title="函数参数的默认值,定义默认值的参数必须是尾参数，因为定义默认值之后该参数可忽略"></a>函数参数的默认值,定义默认值的参数必须是尾参数，因为定义默认值之后该参数可忽略</h4><pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function fn(a,b=2) &#123;</span><br><span class="line">    return &#123;a, b&#125;;</span><br><span class="line">&#125;</span><br><span class="line">console.log(fn(1))//&#123;a: 1, b: 2&#125;</span><br></pre></td></tr></table></figure>
</code></pre><h4 id="rest参数-用于获取函数的多余参数-rest为参数"><a href="#rest参数-用于获取函数的多余参数-rest为参数" class="headerlink" title="rest参数,用于获取函数的多余参数,rest为参数"></a>rest参数,用于获取函数的多余参数,<em>rest为参数</em></h4><pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function fn(a, b, ...re) &#123;</span><br><span class="line">    console.log(re)</span><br><span class="line">&#125;</span><br><span class="line">fn(1, 2, 3, 4, 5, 6, 7, 8, 9);</span><br></pre></td></tr></table></figure>
</code></pre><h4 id="扩展运算符-可以将数组或字符串转换为参数序列"><a href="#扩展运算符-可以将数组或字符串转换为参数序列" class="headerlink" title="扩展运算符...,可以将数组或字符串转换为参数序列"></a>扩展运算符<code>...</code>,可以将数组或字符串转换为参数序列</h4><ul>
<li><p>获取最大值</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var arr = [1, 2, 3, 4, 5, 6, 7, 8, 9];</span><br><span class="line">Math.max.apply(null, arr);</span><br><span class="line">Math.max(...arr); // ... 的作用是将arr的[]去掉</span><br></pre></td></tr></table></figure>
</li>
<li><p>将字符串拆分</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var str = &apos;hello&apos;;</span><br><span class="line">var arr = [...str];</span><br><span class="line">console.log(arr);// [&quot;h&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot;]</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="箭头函数-gt"><a href="#箭头函数-gt" class="headerlink" title="箭头函数() =&gt; {}"></a><a href="http://es6.ruanyifeng.com/?search=observe&amp;x=0&amp;y=0#docs/function#箭头函数" target="_blank" rel="noopener">箭头函数<code>() =&gt; {}</code></a></h4><p>用来作为回掉函数使用</p>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var f = a =&gt; a + 1;</span><br><span class="line">console.log(f(1));//2</span><br></pre></td></tr></table></figure>
</code></pre><ul>
<li><p>注意:</p>
<ol>
<li><p>函数体内的this对象，就是定义时所在的对象，而不是使用时所在的对象。</p>
</li>
<li><p>不可以当作构造函数，也就是说，不可以使用new命令，否则会抛出一个错误。</p>
</li>
<li><p>不可以使用arguments对象，该对象在函数体内不存在。如果要用，可以用Rest参数代替。</p>
</li>
<li><p>不可以使用yield命令，因此箭头函数不能用作Generator函数。</p>
</li>
</ol>
</li>
</ul>
<h1 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h1><h4 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h4><p>Set是一个构造函数,可以传入一个数组或类数组初始化默认值<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var set = new Set([1, 2, 3, 4, 5, 6, 6, 6, 6]);</span><br><span class="line">console.log(set);//1,2,3,4,5,6</span><br><span class="line">set.size;//6</span><br><span class="line">set.add(7); //1,2,3,4,5,6,7</span><br><span class="line">set.delete(7); //true</span><br><span class="line">set.has(7); //false</span><br><span class="line">set.clear();</span><br></pre></td></tr></table></figure></p>
<p>其成员不可以重复,所以可以用set去重</p>
<h5 id="set常用的方法"><a href="#set常用的方法" class="headerlink" title="set常用的方法"></a>set常用的方法</h5><ul>
<li><code>set.size</code>:成员的个数,相当于数组的长度</li>
<li><code>set.add(value)</code>,为Set的实例添加值</li>
<li><code>set.delete(value)</code>,删除Set实例的值</li>
<li><code>set.has(value)</code>,判断传入的参数是否为set的成员</li>
<li><code>set.clear()</code>,清除set中所有的成员</li>
</ul>
<h4 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h4><p>它类似于对象，也是键值对的集合，各种类型的值(包括对象)都可以当作键。Map接受一个数组作为参数，该数组的成员是一个一个表示键值对的数组。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var map = new Map([[&apos;xiaohong&apos;, 80], [&apos;lisi&apos;, 78], [&apos;wangwu&apos;, 56]]);</span><br><span class="line">//Map&#123;&quot;xiaohong&quot; =&gt; 80, &quot;lisi&quot; =&gt; 78, &quot;wangwu&quot; =&gt; 56&#125;</span><br><span class="line">map.size;//3</span><br><span class="line">map.set(&apos;xiaobai&apos;,38);//Map &#123;&quot;xiaohong&quot; =&gt; 80, &quot;lisi&quot; =&gt; 78, &quot;wangwu&quot; =&gt; 56, &quot;xiaobai&quot; =&gt; 38&#125;</span><br><span class="line">map.get(&apos;xiaobai&apos;);//38</span><br></pre></td></tr></table></figure></p>
<h5 id="Map常用的方法"><a href="#Map常用的方法" class="headerlink" title="Map常用的方法"></a>Map常用的方法</h5><ul>
<li><code>map.size</code>:成员的个数,相当于数组的长度</li>
<li><code>map.set(key,value)</code>:添加新键值对</li>
<li><code>map.get(key)</code>:通过key获取value</li>
<li><code>map.delete(key)</code>:删除map实例的值</li>
<li><code>map.has(key)</code>:判断传入的参数是否为map的成员</li>
<li><code>map.clear()</code>:清除map中所有的成员</li>
</ul>
<h5 id="Map的遍历"><a href="#Map的遍历" class="headerlink" title="Map的遍历"></a>Map的遍历</h5><ul>
<li><p>forEach</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">map.forEach(function () &#123;</span><br><span class="line">    console.log(arguments);</span><br><span class="line">&#125;);</span><br><span class="line">/*</span><br><span class="line">[80, &quot;xiaohong&quot;, Map]</span><br><span class="line">[78, &quot;lisi&quot;, Map]</span><br><span class="line">[56, &quot;wangwu&quot;, Map]</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>
</li>
<li><p>for of</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">for (var i of map) &#123;</span><br><span class="line">    console.log(i)</span><br><span class="line">&#125;</span><br><span class="line">/*</span><br><span class="line"> [&quot;xiaohong&quot;, 80]</span><br><span class="line"> [&quot;xiaohong&quot;, 80]</span><br><span class="line"> [&quot;wangwu&quot;, 56]</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>
<ul>
<li><p><code>map.keys()</code>:遍历map的key值</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">for (var i of map.keys()) &#123;</span><br><span class="line">   console.log(i)</span><br><span class="line">&#125;</span><br><span class="line">/*</span><br><span class="line"> iaohong</span><br><span class="line"> xiaohong</span><br><span class="line"> wangwu</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>map.values()</code>:遍历map的value值</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">for (var i of map.values()) &#123;</span><br><span class="line">    console.log(i)</span><br><span class="line">&#125;</span><br><span class="line">/*</span><br><span class="line"> 80</span><br><span class="line"> 78</span><br><span class="line"> 56</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>map.entries()</code>:遍历map的key和value值</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">for (var [key,value] of map.entries()) &#123;</span><br><span class="line">    console.log(key,value)</span><br><span class="line">&#125;</span><br><span class="line">/*</span><br><span class="line"> xiaohong 80</span><br><span class="line"> lisi     78</span><br><span class="line"> wangwu   56</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h4 id="Iterator和Symbol"><a href="#Iterator和Symbol" class="headerlink" title="Iterator和Symbol"></a>Iterator和Symbol</h4><h5 id="Symbol"><a href="#Symbol" class="headerlink" title="Symbol"></a>Symbol</h5><p>ES6引入了一种新的原始数据类型Symbol,表示一个独一无二的ID.它通过Symbol函数生成.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var s = Symbol();</span><br><span class="line">console.log(s);//Symbol()</span><br><span class="line">typeof s;//&quot;symbol&quot;</span><br><span class="line">//独一无二</span><br><span class="line">var s1 = Symbol(&apos;test&apos;);</span><br><span class="line">var s2 = Symbol(&apos;test&apos;);</span><br><span class="line">s1===s2;//false</span><br></pre></td></tr></table></figure></p>
<h5 id="Iterrator"><a href="#Iterrator" class="headerlink" title="Iterrator"></a>Iterrator</h5><p>遍历接口:必须部署一个iterator方法,该方法部署在一个键名为Symbol.iterator的属性上,对应的键值是一个函数,该函数返回一个遍历器对象</p>
<ol>
<li><p>在Object上部署接口</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Object.prototype[Symbol.iterator] = function () &#123;</span><br><span class="line">    var keys = Object.keys(this);</span><br><span class="line">    var _this = this;</span><br><span class="line">    var index = 0;</span><br><span class="line">    return &#123;</span><br><span class="line">        next()&#123;</span><br><span class="line">            if (index &lt; keys.length) &#123;</span><br><span class="line">                return &#123;</span><br><span class="line">                    value: _this[keys[index++]], done: false</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                return &#123;</span><br><span class="line">                    value: undefined, done: true</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>然后可以使用 for of 遍历value</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">var obj = &#123;</span><br><span class="line">    a: 1,</span><br><span class="line">    b: 2,</span><br><span class="line">    c: 3,</span><br><span class="line">    d: 4</span><br><span class="line">&#125;;</span><br><span class="line">for (var value of obj) &#123;</span><br><span class="line">    console.log(value);</span><br><span class="line">&#125;</span><br><span class="line">/*</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="Generator函数"><a href="#Generator函数" class="headerlink" title="Generator函数"></a><a href="http://es6.ruanyifeng.com/#docs/generator" target="_blank" rel="noopener">Generator函数</a></h1><p>可以理解为函数内部状态的遍历器,每调用一次,函数顶走势状态发生一次改变,执行Generator函数会返回一个遍历器对象.</p>
<ul>
<li>两个特征<ol>
<li>function关键字与函数名之间有一个星号</li>
<li>函数体内部使用yield语句，定义不同的内部状态</li>
</ol>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function* fn() &#123;</span><br><span class="line">    yield 1;</span><br><span class="line">    yield 2;</span><br><span class="line">    return &apos;ending&apos;;</span><br><span class="line">&#125;</span><br><span class="line">var f = fn();</span><br><span class="line">console.log(f.next());//Object &#123;value: 1, done: false&#125;</span><br><span class="line">console.log(f.next());//Object &#123;value: 1, done: false&#125;</span><br><span class="line">console.log(f.next());//Object &#123;value: ending, done: true&#125;</span><br><span class="line">console.log(f.next());//Object &#123;value: undefined, done: true&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h1><p>作用是可以将异步操作以同步操作的流程表达出来，避免了层层嵌套的回调函数</p>
<h4 id="Promise基本用法"><a href="#Promise基本用法" class="headerlink" title="Promise基本用法"></a>Promise基本用法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new Promise(function (resolve, reject) &#123;&#125;).then(function () &#123;&#125;, function () &#123;&#125;).catch()</span><br></pre></td></tr></table></figure>
<h4 id="Promise案例"><a href="#Promise案例" class="headerlink" title="Promise案例"></a>Promise案例</h4><ul>
<li><p>使用回掉函数</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">var ball1 = document.querySelector(&apos;.ball1&apos;);</span><br><span class="line">var ball2 = document.querySelector(&apos;.ball2&apos;);</span><br><span class="line">var ball3 = document.querySelector(&apos;.ball3&apos;);</span><br><span class="line">function animate(ball, distance, cb) &#123;</span><br><span class="line">    setTimeout(function () &#123;</span><br><span class="line">        var marginLeft = parseInt(ball.style.marginLeft);</span><br><span class="line">        if (marginLeft === distance) &#123;</span><br><span class="line">            cb &amp;&amp; cb();</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            if (marginLeft &lt; distance) &#123;</span><br><span class="line">                marginLeft++;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                marginLeft--;</span><br><span class="line">            &#125;</span><br><span class="line">            ball.style.marginLeft = marginLeft + &apos;px&apos;;</span><br><span class="line">            animate(ball, distance, cb);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, 13);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">animate(ball1, 100, function () &#123;</span><br><span class="line">    animate(ball2, 200, function () &#123;</span><br><span class="line">        animate(ball3, 300, function () &#123;</span><br><span class="line">            animate(ball3, 150, function () &#123;</span><br><span class="line">                animate(ball2, 150, function () &#123;</span><br><span class="line">                    animate(ball1, 150, function () &#123;</span><br><span class="line"></span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用promise</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">function promiseAnimate(ball, distance) &#123;</span><br><span class="line">    return new Promise(function (resolve, reject) &#123;</span><br><span class="line">        function _animate() &#123;</span><br><span class="line">            setTimeout(function () &#123;</span><br><span class="line">                var marginLeft = parseInt(ball.style.marginLeft);</span><br><span class="line">                if (marginLeft === distance) &#123;</span><br><span class="line">                    resolve();</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    if (marginLeft &lt; distance) &#123;</span><br><span class="line">                        marginLeft++;</span><br><span class="line">                    &#125; else &#123;</span><br><span class="line">                        marginLeft--;</span><br><span class="line">                    &#125;</span><br><span class="line">                    ball.style.marginLeft = marginLeft + &apos;px&apos;;</span><br><span class="line">                    _animate();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, 13);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        _animate();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line">promiseAnimate(ball1, 100)</span><br><span class="line">    .then(function () &#123;</span><br><span class="line">        return promiseAnimate(ball2, 200)</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(function () &#123;</span><br><span class="line">        return promiseAnimate(ball3, 300)</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(function () &#123;</span><br><span class="line">        return promiseAnimate(ball1, 300)</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(function () &#123;</span><br><span class="line">        return promiseAnimate(ball2, 300)</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(function () &#123;</span><br><span class="line">        return promiseAnimate(ball3, 300)</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="Promise-all"><a href="#Promise-all" class="headerlink" title="Promise.all"></a>Promise.all</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"> var p1 = new Promise(function (resolve, reject) &#123;</span><br><span class="line">    setTimeout(function () &#123;</span><br><span class="line">        resolve();</span><br><span class="line">        console.log(&apos;p1&apos;);</span><br><span class="line">    &#125;, 40);</span><br><span class="line">&#125;);</span><br><span class="line">var p2 = new Promise(function (resolve, reject) &#123;</span><br><span class="line">    setTimeout(function () &#123;</span><br><span class="line">        reject();</span><br><span class="line">        console.log(&apos;p2&apos;);</span><br><span class="line">    &#125;, 400);</span><br><span class="line">&#125;);</span><br><span class="line">var p3 = new Promise(function (resolve, reject) &#123;</span><br><span class="line">    setTimeout(function () &#123;</span><br><span class="line">        resolve();</span><br><span class="line">        console.log(&apos;p3&apos;);</span><br><span class="line">    &#125;, 1000);</span><br><span class="line">&#125;);</span><br><span class="line">var p4 = Promise.all([p1, p2, p3]);</span><br><span class="line">p4.then(function () &#123;</span><br><span class="line">    console.log(&apos;成功&apos;);</span><br><span class="line">&#125;, function () &#123;</span><br><span class="line">    console.log(&apos;失败&apos;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>p4的状态由p1、p2、p3决定，分成两种情况。<ol>
<li>只有p1、p2、p3的状态都变成resolve，p的状态才会变成resolve，此时p1、p2、p3的返回值组成一个数组，传递给p的回调函数。</li>
<li>只要p1、p2、p3之中有一个被rejected，p的状态就变成rejected，此时第一个被reject的实例的返回值，会传递给p的回调函数。</li>
</ol>
</li>
</ul>
<h4 id="Promise-race"><a href="#Promise-race" class="headerlink" title="Promise.race"></a>Promise.race</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var p4 = Promise.race([p1, p2, p3]);</span><br><span class="line">p4.then(function () &#123;</span><br><span class="line">    console.log(&apos;成功&apos;);</span><br><span class="line">&#125;, function () &#123;</span><br><span class="line">    console.log(&apos;失败&apos;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>p4的状态由p1、p2、p3决定，分成两种情况。<ol>
<li>只要p1、p2、p3中一个的状态变成resolve，p4的状态就变成resolve</li>
<li>只要p1、p2、p3之中有一个被rejected，p的状态就变成rejected，此时第一个被reject的实例的返回值，会传递给p4的回调函数。</li>
</ol>
</li>
</ul>
<h1 id="class"><a href="#class" class="headerlink" title="class"></a>class</h1><h4 id="定义类"><a href="#定义类" class="headerlink" title="定义类"></a>定义类</h4><ul>
<li><p>ES6以前定义类的方法</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function Cat(name) &#123;</span><br><span class="line">    this.name = name;</span><br><span class="line">&#125;</span><br><span class="line">Cat.prototype.getName=function () &#123;</span><br><span class="line">    return this.name;</span><br><span class="line">&#125;</span><br><span class="line">var cat1 = new Cat(&apos;momo&apos;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用class定义类</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> class Cat &#123;</span><br><span class="line">    constructor(name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    getName() &#123;</span><br><span class="line">        return this.name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">var cat1 = new Cat(&apos;momo&apos;);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h4><ul>
<li><p>ES6以前方法的继承</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function Dog(name, age) &#123;</span><br><span class="line">    Cat.apply(this, arguments);</span><br><span class="line">&#125;</span><br><span class="line">Dog.prototype = new Cat();</span><br><span class="line">Dog.prototype.constructor = Dog;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ES6的继承</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">class Dog extends Cat &#123;</span><br><span class="line">    constructor(name, age) &#123;</span><br><span class="line">    //如果需要继承的参数很多,可以使用...rest参数发放</span><br><span class="line">    // constructor(age,name,...rests)--super(...rests)</span><br><span class="line">        super(name);</span><br><span class="line">        this.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    getAge() &#123;</span><br><span class="line">        return this.age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">var dog1 = new Dog(&apos;maomao&apos;, 12);</span><br><span class="line">console.log(dog1.getName());//maomao</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="Module"><a href="#Module" class="headerlink" title="Module"></a>Module</h1>
  </section>
  <footer class="post-footer">
    <!--
    <section class="author">
      <h4>Zia Yang</h4>
      <p></p>
    </section>
    -->
  </footer>
</article>

<nav class="pagination" role="pagination">
    
    <a class="newer-posts" href="/2017/01/11/http爬虫/">
        ← prev <!--http爬虫-->
    </a>
    
    <span class="page-number">•</span>
    
    <a class="older-posts" href="/2017/01/06/数据库/">
        <!--数据库--> next →
    </a>
    
</nav>


        </main>
        <footer id="footer">
            <section id="footer-message">&copy; 2018 Zia Yang. All rights reserved. Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. <a href="https://github.com/guolin/crisp-hexo-theme" target="_blank">crisp</a> theme by <a href="guolin.github.io" target="_blank">Guo Lin</a>.</section>
        </footer>
    </body>
</html>


